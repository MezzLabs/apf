var panino = require("../../panino-docs/index.js");

var options = {
  title          : "APF API",
  output         : './out',
  skin           : "./resources/templates/layout.jade",
  assets         : "./resources/assets",
  additionalObjs : "./additionalObjs.json",
  parseType      : "jsd",
  globalNS       : "apf",
  index          : "./index.md",
  splitFromNS    : true,
  disableTests   : true,
  customTags     : ["baseclass", 
                        // XML stuff for Jade
                        "define", "allowchild", "action",
                        // TOC forms
                        "container", "form", "layout", "selection", "logic", "media", "parser", "apfclass"],
  linkFormat     : function (linkHtml, obj) {
                  if (linkHtml.classes && linkHtml.classes[0] == "isXML" && linkHtml.href !== undefined) {
                        linkHtml.href = linkHtml.href.replace(".html", "-element.html");
                        linkHtml.title = linkHtml.title.replace("class", "element");
                        linkHtml.text = "&lt;a:" + linkHtml.text.replace("apf.", "") + ">";
                  }
                  return linkHtml;
                  }
};

// filched from APF packager's combine.js; will need to come up with a better management
var files = ["../apf.js",
             "../core/class.js",
             //"../core/lib/util/color.js",
             //"../core/lib/util/abstractevent.js",
             "../core/lib/util/async.js",
             "../core/lib/util/cookie.js",
             "../core/lib/util/ecmaext.js",
             //"../core/lib/util/flash.js",
             //"../core/lib/util/hook.js",
             "../core/lib/util/hotkey.js",
             //"../core/lib/util/iepngfix.js",
             //"../core/lib/util.js",
             "../core/lib/util/nameserver.js",
             //"../core/lib/util/o3.js",
             "../core/lib/util/plane.js",
             "../core/lib/util/popup.js",
             //"../core/lib/util/silverlight.js",
             "../core/lib/util/style.js",
             //"../core/lib/util/syntax.js",
             //"../core/lib/util/textdiff.js",
             "../core/lib/util/utilities.js",
             //"../core/lib/util/visibilitymanager.js",
             "../core/lib/util/xml.js",
             //"../core/lib/util/xmldiff.js",
             "../core/lib/util/zmanager.js",
             "../core/lib/history.js",
             //"../core/lib/config.js",
             //"../core/lib/offline.js",
             //"../core/lib/offline/application.js",
             //"../core/lib/offline/gears.js",
             //"../core/lib/offline/detector.js",
             //"../core/lib/offline/models.js",
             //"../core/lib/offline/queue.js",
             //"../core/lib/offline/state.js",
             //"../core/lib/offline/transactions.js",
             "../core/lib/data.js",
             //"../core/lib/date.js",
             //"../core/lib/draw.js",
             //"../core/lib/flow.js",
             //"../core/lib/flow2.js",
             //"../core/lib/geolocation.js",
             //"../core/lib/html.js",
             //"../core/lib/language.js",
             "../core/lib/layout.js",
             //"../core/lib/printer.js",
             //"../core/lib/queue.js",
             //"../core/lib/resize.js",
             //"../core/lib/resize2.js",
             //"../core/lib/selection.js",
             "../core/lib/skins.js",
             //"../core/lib/sort.js",
             //"../core/lib/storage.js",
             "../core/lib/tween.js",
             //"../core/lib/uirecorder.js",
             //"../core/lib/vector.js",
             "../core/lib/xmldb.js",
             //"../core/lib/draw/canvas.js",
             //"../core/lib/draw/chartdraw.js",
             //"../core/lib/draw/vml.js",
             //"../core/lib/storage/air.file.js",
             //"../core/lib/storage/air.js",
             //"../core/lib/storage/air.sql.js",
             //"../core/lib/storage/cookie.js",
             //"../core/lib/storage/flash.js",
             //"../core/lib/storage/gears.js",
             //"../core/lib/storage/html5.js",
             //"../core/lib/storage/memory.js",
             "../core/lib/teleport/http.js",
             //"../core/lib/teleport/iframe.js",
             //"../core/lib/teleport/socket.js",
             //"../core/lib/uirecorder/capture.js",
             //"../core/lib/uirecorder/playback.js",
             //"../core/lib/uirecorder/selenium.js",
             //"../core/lib/uirecorder/ui.js",
             //"../core/markup/domparser.js",
             //"../core/markup/aml.js",
             "../core/markup/aml/node.js",
             "../core/markup/aml/element.js",
             //"../core/markup/aml/characterdata.js",
             //"../core/markup/aml/text.js",
             //"../core/markup/aml/attr.js",
             //"../core/markup/aml/cdatasection.js",
             //"../core/markup/aml/comment.js",
             //"../core/markup/aml/configuration.js",
             "../core/markup/aml/document.js",
             //"../core/markup/aml/documentfragment.js",
             "../core/markup/aml/event.js",
             //"../core/markup/aml/namednodemap.js",
             //"../core/markup/aml/processinginstruction.js",
             //"../core/markup/aml/range.js",
             //"../core/markup/aml/selection.js",
             //"../core/markup/aml/textrectangle.js",
             //"../core/markup/xhtml.js"
             //"../core/markup/xhtml/element.js",
             //"../core/markup/xhtml/body.js",
             //"../core/markup/xhtml/html.js",
             //"../core/markup/xhtml/ignore.js",
             //"../core/markup/xhtml/input.js",
             //"../core/markup/xhtml/option.js",
             //"../core/markup/xhtml/skipchildren.js",
             //"../core/markup/xsd.js",
             //"../core/markup/xsd/element.js",
             //"../core/markup/xsd/enumeration.js",
             //"../core/markup/xsd/fractiondigits.js",
             //"../core/markup/xsd/length.js",
             //"../core/markup/xsd/list.js",
             //"../core/markup/xsd/maxexclusive.js",
             //"../core/markup/xsd/maxinclusive.js",
             //"../core/markup/xsd/maxlength.js",
             //"../core/markup/xsd/maxscale.js",
             //"../core/markup/xsd/minexclusive.js",
             //"../core/markup/xsd/mininclusive.js",
             //"../core/markup/xsd/minlength.js",
             //"../core/markup/xsd/minscale.js",
             //"../core/markup/xsd/pattern.js",
             //"../core/markup/xsd/restriction.js",
             //"../core/markup/xsd/schema.js",
             //"../core/markup/xsd/simpletype.js",
             //"../core/markup/xsd/totaldigits.js",
             //"../core/markup/xsd/union.js",
             //"../core/markup/html5.js",
             //"../core/markup/xforms.js",
             //"../core/markup/xinclude.js",
             //"../core/markup/xinclude/fallback.js",
             //"../core/markup/xinclude/include.js",
             //"../core/markup/xslt/xslt.js",
             //"../core/baseclasses/liveedit.js",
             //"../core/baseclasses/liveedit/richtext.js",
             //"../core/baseclasses/liveedit/anchor.js",
             //"../core/baseclasses/liveedit/blockquote.js",
             //"../core/baseclasses/liveedit/charmap.js",
             //"../core/baseclasses/liveedit/clipboard.js",
             //"../core/baseclasses/liveedit/code.js",
             //"../core/baseclasses/liveedit/color.js",
             //"../core/baseclasses/liveedit/datetime.js",
             //"../core/baseclasses/liveedit/directions.js",
             //"../core/baseclasses/liveedit/emotions.js",
             //"../core/baseclasses/liveedit/fontbase.js",
             //"../core/baseclasses/liveedit/fontstyle.js",
             //"../core/baseclasses/liveedit/help.js",
             //"../core/baseclasses/liveedit/hr.js",
             //"../core/baseclasses/liveedit/image.js",
             //"../core/baseclasses/liveedit/links.js",
             //"../core/baseclasses/liveedit/list.js",
             //"../core/baseclasses/liveedit/media.js",
             //"../core/baseclasses/liveedit/printing.js",
             //"../core/baseclasses/liveedit/search.js",
             //"../core/baseclasses/liveedit/spell.js",
             //"../core/baseclasses/liveedit/subsup.js",
             //"../core/baseclasses/liveedit/tables.js",
             //"../core/baseclasses/liveedit/visualaid.js",
             "../core/baseclasses/anchoring.js",
             //"../core/baseclasses/contenteditable.js",
             "../core/baseclasses/guielement.js",
             "../core/baseclasses/presentation.js",
             "../core/baseclasses/validation.js",
             "../core/baseclasses/databinding.js",
             "../core/baseclasses/databinding/multiselect.js",
             //"../core/baseclasses/databinding/standard.js",
             "../core/baseclasses/multiselect.js",
             //"../core/baseclasses/childvalue.js",
             "../core/baseclasses/dataaction.js",
             "../core/baseclasses/cache.js",
             "../core/baseclasses/rename.js",
             //"../core/baseclasses/a11y.js",
             "../core/baseclasses/basebutton.js",
             "../core/baseclasses/baselist.js",
             "../core/baseclasses/basesimple.js",
             "../core/baseclasses/basestatebuttons.js",
             "../core/baseclasses/basetab.js",
             "../core/baseclasses/basetree.js",
             "../core/baseclasses/delayedrender.js",
             "../core/baseclasses/dragdrop.js",
             "../core/baseclasses/focussable.js",
             "../core/baseclasses/interactive.js",
             //"../core/baseclasses/media.js",
             "../core/baseclasses/multicheck.js",
             "../core/baseclasses/teleport.js",
             //"../core/baseclasses/transaction.js",
             //"../core/baseclasses/virtualviewport.js",
             //"../core/baseclasses/xforms.js",
             //"../core/baseclasses/contenteditable/clipboard.js",
             //"../core/baseclasses/contenteditable/commands.js",
             //"../core/baseclasses/contenteditable/interactive.js",
             //"../core/baseclasses/contenteditable/selectrect.js",
             //"../core/baseclasses/contenteditable/visualconnect.js",
             //"../core/baseclasses/contenteditable/visualselect.js",
             //"../core/window-o3.js",
             "../core/window.js",
             //"../core/browsers/gears.js",
             //"../core/browsers/gecko.js",
             //"../core/browsers/ie.js",
             //"../core/browsers/iphone.js",
             //"../core/browsers/non_ie.js",
             //"../core/browsers/o3.js",
             //"../core/browsers/opera.js",
             //"../core/browsers/webkit.js",
             //"../core/browsers/node/XMLHttpRequest.js",
             //"../core/crypto/barrett.js",
             //"../core/crypto/base64.js",
             //"../core/crypto/bigint.js",
             //"../core/crypto/blowfish.js",
             //"../core/crypto/md4.js",
             //"../core/crypto/md5.js",
             //"../core/crypto/rsa.js",
             //"../core/crypto/sha1.js",
             //"../core/debug/debug.js",
             //"../core/debug/debugwin.js",
             //"../core/debug/profiler.js",
             //"../core/parsers.js",
             //"../core/parsers/livemarkup.js",
             "../core/parsers/url.js",
             //"../core/parsers/xpath.js",
             //"../elements/bindingrule.js",
             "../elements/accordion.js",
             "../elements/actionrule.js",
             "../elements/actions.js",
             "../elements/actiontracker.js",
             //"../elements/application.js",
             //"../elements/appsettings.js",
             //"../elements/audio.js",
             //"../elements/auth.js",
             //"../elements/axis.js",
             "../elements/bar.js",
             //"../elements/bindingcolorrule.js",
             //"../elements/bindingcolumnrule.js",
             //"../elements/bindingdndrule.js",
             "../elements/bindingeachrule.js",
             //"../elements/bindingloadrule.js",
             //"../elements/bindingquicksandrule.js",
             "../elements/bindings.js",
             //"../elements/bindingseriesrule.js",
             //"../elements/body.js",
             //"../elements/browser.js",
             "../elements/button.js",
             //"../elements/caldropdown.js",
             //"../elements/calendar.js",
             //"../elements/calendarlist.js",
             //"../elements/chart.js",
             "../elements/checkbox.js",
             //"../elements/collection.js",
             //"../elements/colorpicker.js",
             //"../elements/colorpicker2.js",
             "../elements/comment.js",
             "../elements/contextmenu.js",
             "../elements/datagrid.js",
             //"../elements/defaults.js",
             "../elements/divider.js",
             "../elements/dropdown.js",
             //"../elements/editor.js",
             "../elements/errorbox.js",
             "../elements/event.js",
             //"../elements/filler.js",
             //"../elements/flashplayer.js",
             //"../elements/flowchart.js",
             //"../elements/flowchart2.js",
             "../elements/frame.js",
             //"../elements/gallery.js",
             //"../elements/graph.js",
             "../elements/hbox.js",
             //"../elements/iconmap.js",
             "../elements/img.js",
             "../elements/item.js",
             //"../elements/junction.js",
             "../elements/label.js",
             //"../elements/lineselect.js",
             "../elements/list.js",
             //"../elements/loader.js",
             //"../elements/loadindicator.js",
             //"../elements/map.js",
             //"../elements/markupedit.js",
             "../elements/menu.js",
             //"../elements/method.js",
             "../elements/modalwindow.js",
             "../elements/model.js",
             "../elements/notifier.js",
             "../elements/page.js",
             //"../elements/pager.js",
             //"../elements/palette.js",
             //"../elements/param.js",
             //"../elements/persist.js",
             //"../elements/portal.js",
             "../elements/progressbar.js",
             //"../elements/propedit.js",
             "../elements/radiobutton.js",
             //"../elements/remote.js",
             //"../elements/rpc.js",
             "../elements/script.js",
             //"../elements/scrollbar.js",
             //"../elements/services.js",
             "../elements/skin.js",
             //"../elements/slider.js",
             //"../elements/slideshow.js",
             "../elements/smartbinding.js",
             //"../elements/source.js",
             "../elements/spinner.js",
             "../elements/splitbox.js",
             "../elements/splitbutton.js",
             //"../elements/splitter.js",
             "../elements/state-group.js",
             "../elements/state.js",
             //"../elements/statusbar.js",
             //"../elements/style.js",
             //"../elements/submitform.js",
             "../elements/tab.js",
             "../elements/table.js",
             //"../elements/teleport.js",
             //"../elements/template.js",
             "../elements/text.js",
             "../elements/textbox.js",
             //"../elements/toc.js",
             "../elements/toolbar.js",
             "../elements/tree.js",
             //"../elements/upload.js",
             //"../elements/vectorflow.js",
             //"../elements/video.js",
             //"../elements/viewport.js",
             //"../elements/webdav.js",
             //"../elements/xmpp.js",
             "../elements/actiontracker/undodata.js",
             //"../elements/actiontracker/xmlactions.js",
             //"../elements/audio/type_flash.js",
             //"../elements/audio/type_native.js",
             //"../elements/modalwindow/widget.js",
             //"../elements/rpc/cgi.js",
             //"../elements/rpc/header.js",
             //"../elements/rpc/jphp.js",
             //"../elements/rpc.js",
             //"../elements/rpc/rdb.js",
             //"../elements/rpc/rest.js",
             //"../elements/rpc/soap.js",
             //"../elements/rpc/xmlrpc.js",
             //"../elements/rpc/yql.js",
             //"../elements/textbox/autocomplete.js",
             //"../elements/textbox/autocomplete2.js",
             //"../elements/textbox/masking.js",
             //"../elements/upload/flash.js",
             //"../elements/upload/html4.js",
             //"../elements/upload/html5.js",
             //"../elements/video/type_flv.js",
             //"../elements/video/type_native.js",
             //"../elements/video/type_qt.js",
             //"../elements/video/type_silverlight.js",
             //"../elements/video/type_vlc.js",
             //"../elements/video/type_wmp.js",
             //"../elements/xmpp/muc.js",
             //"../elements/xmpp/rdb.js",
             //"../elements/xmpp/roster.js",
             //"../processinginstructions/livemarkup.js",
             //"../jpack_end.js",
             //"../apf-node.js",
             //"../apf-o3.js",
             //"../loader-o3.js",
             //"../loader.js",
             //"../loader2.js"
            ];

panino.parse(files, options, function (err, ast) {
  if (err) {
    console.error(err);
    process.exit(1);
  }

  // for the javascript
  panino.render('html', ast, options, function (err) {
    if (err) {
      console.error(err);
      process.exit(1);
    }
  });

});